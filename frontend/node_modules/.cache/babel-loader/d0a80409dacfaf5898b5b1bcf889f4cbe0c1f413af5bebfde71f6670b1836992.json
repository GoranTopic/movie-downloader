{"ast":null,"code":"import axios from 'axios';\n\n// yify api endpoint\nconst endpoint = 'https://yts.lt/api/v2/';\n\n// server address\nlet cors_proxy = 'http://147.182.241.239:4236';\n\n// super secret token, don't share =P \nlet token = '5df54d27-26d0-43ce-aef1-34d71e0b0dbb';\nconst query_movie_suggestions = async key => {\n  console.log(\"querying movie suggestions:\", key);\n  try {\n    const {\n      data\n    } = await axios.get(`${cors_proxy}/${endpoint}/list_movies.json`, {\n      params: {\n        query_term: key\n      },\n      headers: {\n        token\n      } // token for the cors proxy\n    });\n\n    if (data.status === 'ok') if (data.data.movies) {\n      console.log(\"got movie suggestions:\", data.data.movies);\n      return data.data.movies;\n    } else return [];\n    throw new Error(data.status_message);\n  } catch (err) {\n    console.error(err);\n    throw new Error('Something went wrong');\n  }\n};\nconst get_torrent_url = async movie_id => await axios.get(`${cors_proxy}/${endpoint}/list_movies.json`, {\n  params: {\n    movie_id: movie_id,\n    with_images: true\n  },\n  headers: {\n    token\n  } // token for the cors proxy\n}).then(response => {\n  let movie = response.data.movie;\n  let torrent = movie.torrents.filter(t => t.quality === '1080p')[0];\n  return torrent;\n}).catch(e => console.error(e));\nexport { query_movie_suggestions, get_torrent_url };","map":{"version":3,"names":["axios","endpoint","cors_proxy","token","query_movie_suggestions","key","console","log","data","get","params","query_term","headers","status","movies","Error","status_message","err","error","get_torrent_url","movie_id","with_images","then","response","movie","torrent","torrents","filter","t","quality","catch","e"],"sources":["/home/telix/movie-downloader/src/yify-cli.js"],"sourcesContent":["import axios from 'axios';\n\n// yify api endpoint\nconst endpoint = 'https://yts.lt/api/v2/';\n\n// server address\nlet cors_proxy = 'http://147.182.241.239:4236';\n\n// super secret token, don't share =P \nlet token = '5df54d27-26d0-43ce-aef1-34d71e0b0dbb';\n\nconst query_movie_suggestions = async key => {\n  console.log(\"querying movie suggestions:\", key)\n  try {\n    const { data } = await axios\n      .get(`${cors_proxy}/${endpoint}/list_movies.json`, {\n        params: { query_term: key },\n        headers: { token } // token for the cors proxy\n      })\n    if (data.status === 'ok')\n      if (data.data.movies) {\n        console.log(\"got movie suggestions:\", data.data.movies)\n        return data.data.movies;\n      }\n      else\n        return []\n    throw new Error(data.status_message);\n  } catch (err) {\n    console.error(err)\n    throw new Error('Something went wrong');\n  }\n}\n\nconst get_torrent_url = async movie_id =>\n  await axios\n    .get(`${cors_proxy}/${endpoint}/list_movies.json`, {\n      params: {\n        movie_id: movie_id,\n        with_images: true,\n      },\n      headers: { token } // token for the cors proxy\n    })\n    .then(response => {\n      let movie = response.data.movie;\n      let torrent = movie.torrents.filter(\n        t => t.quality === '1080p'\n      )[0]\n      return torrent\n    })\n    .catch(e => console.error(e))\n\nexport { query_movie_suggestions, get_torrent_url }\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,MAAMC,QAAQ,GAAG,wBAAwB;;AAEzC;AACA,IAAIC,UAAU,GAAG,6BAA6B;;AAE9C;AACA,IAAIC,KAAK,GAAG,sCAAsC;AAElD,MAAMC,uBAAuB,GAAG,MAAMC,GAAG,IAAI;EAC3CC,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEF,GAAG,CAAC;EAC/C,IAAI;IACF,MAAM;MAAEG;IAAK,CAAC,GAAG,MAAMR,KAAK,CACzBS,GAAG,CAAE,GAAEP,UAAW,IAAGD,QAAS,mBAAkB,EAAE;MACjDS,MAAM,EAAE;QAAEC,UAAU,EAAEN;MAAI,CAAC;MAC3BO,OAAO,EAAE;QAAET;MAAM,CAAC,CAAC;IACrB,CAAC,CAAC;;IACJ,IAAIK,IAAI,CAACK,MAAM,KAAK,IAAI,EACtB,IAAIL,IAAI,CAACA,IAAI,CAACM,MAAM,EAAE;MACpBR,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEC,IAAI,CAACA,IAAI,CAACM,MAAM,CAAC;MACvD,OAAON,IAAI,CAACA,IAAI,CAACM,MAAM;IACzB,CAAC,MAEC,OAAO,EAAE;IACb,MAAM,IAAIC,KAAK,CAACP,IAAI,CAACQ,cAAc,CAAC;EACtC,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZX,OAAO,CAACY,KAAK,CAACD,GAAG,CAAC;IAClB,MAAM,IAAIF,KAAK,CAAC,sBAAsB,CAAC;EACzC;AACF,CAAC;AAED,MAAMI,eAAe,GAAG,MAAMC,QAAQ,IACpC,MAAMpB,KAAK,CACRS,GAAG,CAAE,GAAEP,UAAW,IAAGD,QAAS,mBAAkB,EAAE;EACjDS,MAAM,EAAE;IACNU,QAAQ,EAAEA,QAAQ;IAClBC,WAAW,EAAE;EACf,CAAC;EACDT,OAAO,EAAE;IAAET;EAAM,CAAC,CAAC;AACrB,CAAC,CAAC,CACDmB,IAAI,CAACC,QAAQ,IAAI;EAChB,IAAIC,KAAK,GAAGD,QAAQ,CAACf,IAAI,CAACgB,KAAK;EAC/B,IAAIC,OAAO,GAAGD,KAAK,CAACE,QAAQ,CAACC,MAAM,CACjCC,CAAC,IAAIA,CAAC,CAACC,OAAO,KAAK,OAAO,CAC3B,CAAC,CAAC,CAAC;EACJ,OAAOJ,OAAO;AAChB,CAAC,CAAC,CACDK,KAAK,CAACC,CAAC,IAAIzB,OAAO,CAACY,KAAK,CAACa,CAAC,CAAC,CAAC;AAEjC,SAAS3B,uBAAuB,EAAEe,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}